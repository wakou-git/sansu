w='[-/^0-9.\\s',s=`\\+${w}*+]*\\*)*`,d=`${w}]*`,_=`(?:${d}${s}${d}`,p=a=>'-/^'.indexOf(a)+1,module.exports=$=(n,i)=>n.split(RegExp(`(?<=^${_})\\s(?=${_}$)`)).reduce((l,v)=>n=p(v)?[(i=y=>y=p(l[1].slice(-1)[0])&&y>=n&&[l[0].push(l[1].shift()),i()])(),...[l[1].unshift(v),l]][2]:[l[0].push(v),l][1],[[],[]]).flat().reduce((l,x)=>l.push((i=p(x))?[,(a,b)=>a-b,(a,b)=>a/b,(a,b)=>a**b][i](...l.splice(-2)):/^\+.+\*$/.test(x)?$(x.slice(1,-1)):x)&&l,[]).pop();